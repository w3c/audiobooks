<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
	<head>
		<meta charset="utf-8" />
		<title>Audiobooks</title>
		<script src="https://www.w3.org/Tools/respec/respec-w3c" class="remove" defer="defer"></script>
		<script src="common/js/biblio.js" class="remove"></script>
		<link href="common/css/common.css" rel="stylesheet" type="text/css" />
		<script class="remove">
			var respecConfig = {
				group: "publishing",
				wgPublicList: "public-publ-wg",
				edDraftURI: "https://w3c.github.io/audiobooks/",
				errata: "https://w3c.github.io/audiobooks/errata/",
				previousPublishDate: "2020-10-01",
				prEnd: "2020-10-30",
				previousMaturity: "PR",
				specStatus: "ED",
				implementationReportURI: "https://www.w3.org/publishing/groups/publ-wg/implementation/results.html",
				crEnd: "2020-03-31",
				updateableRec: true,
				noRecTrack: false,
				shortName: "audiobooks",
				copyrightStart: "2019",
				editors:[ {
					name: "Wendy Reid",
					company: "Rakuten/Kobo",
					companyURL: "https://www.kobo.com/",
					"w3cid": 102009
				}, {
					"name": "Matt Garrish",
					"company": "DAISY Consortium",
					"companyURL": "https://daisy.org",
					"w3cid": 51655
				}],
				processVersion: 2020,
				includePermalinks: true,
				permalinkEdge: true,
				permalinkHide: false,
				diffTool: "http://www.aptest.com/standards/htmldiff/htmldiff.pl",
				github: {
					repoURL: "https://github.com/w3c/audiobooks",
					branch: "master"
				},
				localBiblio: localBiblio,
				alternateFormats: [{
				    "uri": "audiobooks.epub",
				    "label": "EPUB"
				}]
		};</script>
	</head>
	<body>
		<section id="abstract">
			<p>This specification describes the requirements for the creation of audiobooks, using a profile of the
					<dfn>Publication Manifest</dfn> specification.</p>
		</section>
		<section id="sotd"></section>
		<section id="intro" class="informative">
			<h3>Introduction</h3>

			<p>An Audiobook is a collection of audio resources grouped together by a reading order, metadata, and
				resources, all contained in a manifest. This Audiobook can live on the Open Web Platform, or as a
				packaged entity.</p>

			<p>This specification is intended to standardize the audiobooks distribution model on the web and between
				businesses. It should facilitate different user agent architectures for the consumption of Audiobooks.
				The primary goal is to bring clarity to a part of the publishing industry currently underserved by
				standards, while opening Audiobooks to the Open Web Platform and new user agents. This specification
				does not outline what file types or formats should be used by content creators, only a manifest format
				for delivering them.</p>

			<p>This specification does not define how user agents are expected to render Audiobooks. Details about the
				types of affordances that user agents can provide to enhance the reading experience for users are
				instead defined in [[pwp-ucr]].</p>
		</section>
		<section id="audio-terminology">
			<h3>Terminology</h3>

			<p>Terms with meanings specific to the publishing industry are capitalized in this document (e.g., "Reading
				System"). A complete list of these <a data-cite="!pub-manifest/#terminology">terms and definitions</a>
				is provided in [[pub-manifest]].</p>

			<p>Only the first instance of a term in a section is linked to its definition.</p>

			<p>In addition, the following terminology is defined for use in this specification:</p>

			<dl class="termlist">
				<dt>
					<dfn id="dfn-file-name" data-lt="File Names">Supplemental Content</dfn>
				</dt>
				<dd>
					<p>Supplemental content is any content relating to the audiobook content but not required for the
						full experience of the publication. Examples of supplemental content include photographs,
						charts, or data relating to topics mentioned in the audiobook.</p>
				</dd>
			</dl>
		</section>
		<section id="conformance"></section>
		<section id="audio-construction">
			<h2>Construction</h2>

			<section id="audio-pep">
				<h3>Primary Entry Page</h3>

				<p>The <dfn>primary entry page</dfn> is an HTML <a href="#audio-resourcelist">resource</a> that
					represents the preferred starting resource of an Audiobook and enables discovery of its manifest. It
					typically introduces the audiobook and provides access to the content.</p>

				<p>The primary entry page MUST include either a <a
						href="https://www.w3.org/TR/pub-manifest/#manifest-link">link to the manifest</a> or <a
						href="https://www.w3.org/TR/pub-manifest/#manifest-embed">embed the manifest</a>
					[[!pub-manifest]]. It also SHOULD contain the <a href="#audio-toc">table of contents</a>.</p>

				<p>An Audiobook MUST include a primary entry page except when <a
						href="https://www.w3.org/TR/audiobooks/#audio-packaging">packaging</a> allows alternative
					discovery of the manifest. When present, the page MUST be included in the <a
						href="#audio-resourcelist">resource list</a>.</p>
			</section>

			<section id="audio-toc">
				<h3>Table of Contents</h3>

				<p>The table of contents provides a hierarchical list of links that reflects the structural outline of
					the major sections of the Audiobook and any supplemental content it may contain.</p>

				<p>The table of contents is expressed via an [[html]] element (typically a nav element) in one of the
					resources. This element MUST be identified by the role attribute [[html]] value
						<code>"doc-toc"</code> [[dpub-aria-1.0]].</p>

				<p>If the table of contents is located in the <a href="#audio-pep">primary entry page</a>, the table of
					contents MUST be the first element in the document — in document tree order [[dom]] — with that role
					value. Otherwise, the manifest SHOULD identify the resource that contains the structure.</p>

				<p>If the table of contents is not located in the <a href="#audio-pep">primary entry page</a>, the
					manifest SHOULD identify the resource that contains the structure.</p>

				<p>When an Audiobook contains additional resources (i.e. supplemental content):</p>

				<ul>
					<li>
						<p>a table of contents SHOULD be included;</p>
					</li>
					<li>
						<p>the table of contents SHOULD include a link to any of the <a href="#audio-resourcelist"
								>resources</a>; and</p>
					</li>
					<li>
						<p>all links SHOULD refer to <a href="https://www.w3.org/TR/pub-manifest/#publication-resources"
								>publication resources</a>&#160;[[!pub-manifest]].</p>
					</li>
				</ul>

				<p class="note">When including supplemental content, be aware that users might not have access to this
					content unless it is linked to from the table of contents. It is strongly advised to provide links
					to all content that is not in the default reading order.</p>

				<p class="note">For more guidance on the structure and formatting for tables of contents, consult <a
						href="https://w3c.github.io/pub-manifest/#app-toc-structure">Publication Manifest -
						Machine-Processable Table of Contents</a> [[pub-manifest]].</p>

			</section>
		</section>
		<section id="audio-manifest" class="normative">
			<h2>Manifest</h2>

			<section id="audio-properties-intro" class="informative">
				<h3>Introduction</h3>

				<p>The Audiobook manifest is defined by a set of properties that describe the basic information a user
					agent requires to process and render an Audiobook. These properties are categorized in the
					Publication Manifest [[pub-manifest]]. Where these properties are extended from the Publication
					Manifest is specified in this section.</p>

				<p class="note">The Audiobook manifest is defined as a specific "shape" of [[json-ld11]]. This shape is
					also defined, informally, through a JSON schema&#160;[[json-schema]] that expresses the constraints
					defined in this specification. This schema is maintained at <a
						href="https://www.w3.org/ns/pub-schema/audiobooks/"
						>https://www.w3.org/ns/pub-schema/audiobooks/</a>.</p>
			</section>

			<section id="audio-requirements">
				<h4>Requirements</h4>
				<p>The requirements for the expression of Audiobook properties and resource relations are defined as
					follows:</p>

				<p class="note">The list of properties uses the formal names for each property as described in
					[[schema.org]] and [[pub-manifest]]. A descriptive label is included in parentheses where the
					purpose of these properties might be unclear.</p>

				<dl>
					<dt>REQUIRED:</dt>
					<dd>
						<ul>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#profile-conformance">
									<code>conformsTo</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#manifest-context">
									<code>@context</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#default-reading-order">
									<code>readingOrder</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#pub-title"><code>name</code></a>
								(publication title) </li>
						</ul>
					</dd>
					<dt>RECOMMENDED:</dt>
					<dd>
						<ul>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#abridged">
									<code>abridged</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#accessibilityFeature">
									<code>accessibilityFeature</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#accessibilityHazard">
									<code>accessibilityHazard</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#accessibilitySummary">
									<code>accessibilitySummary</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#accessMode">
									<code>accessMode</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#accessModeSufficient">
									<code>accessModeSufficient</code>
								</a>
							</li>
							<li>
								<a href="#audio-creators">
									<code>author</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#cover">
									<code>cover</code>
								</a>
							</li>
							<li>
								<a href="#audio-duration">
									<code>duration</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#last-modification-date">
									<code>dateModified</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#publication-date">
									<code>datePublished</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#canonical-identifier"><code>id</code></a>
								(canonical identifier) </li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#inLanguage"><code>inLanguage</code></a>
								(publication language) </li>
							<li>
								<a href="#audio-creators">
									<code>readBy</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#reading-progression-direction">
									<code>readingProgression</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#resource-list">
									<code>resources</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#publication-types">
									<code>type</code>
								</a>
							</li>
							<li>
								<a href="https://www.w3.org/TR/pub-manifest/#address"><code>url</code></a> (address)
							</li>
						</ul>
					</dd>
				</dl>

				<p class="note">Some properties are implicitly required, as they are compiled from alternative
					information when not explicitly authored. Refer to the <a
						href="https://www.w3.org/TR/pub-manifest/#app-internal-rep-data-model">internal representation
						data models</a>&#160;[[pub-manifest]] for more information (the Audiobooks representation only
					differs in the default value for the <code>type</code> term).</p>
			</section>

			<section id="audio-context" class="normative">
				<h3>Manifest Contexts</h3>

				<p>An Audiobook manifest has to start by setting the JSON-LD context [[!json-ld]]. The context has the
					following two major components:</p>

				<ul>
					<li>the [[schema.org]] context: <code>https://schema.org</code></li>
					<li>the publication context: <code>https://www.w3.org/ns/pub-context</code></li>
				</ul>

				<pre class="example" title="The context declaration.">
		{
		    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
		    &#8230;
		}
				</pre>

				<p>To add the global language and direction of the manifest metadata, <a
						href="https://www.w3.org/TR/pub-manifest/#manifest-lang-dir">language and direction</a>
					declaration [[!pub-manifest]] can also be added to the context:</p>

				<pre class="example" title="Declaring French as the default language for the manifest">
						{
						    "@context" : [
						        "https://schema.org",
						        "https://www.w3.org/ns/pub-context",
						        {"language":"fr"}
						    ]
						    &#8230;
						}
				</pre>

			</section>

			<section id="audio-conformance">
				<h3>Publication Conformance</h3>

				<p>The conformance URL expressed in the <a
						href="https://www.w3.org/TR/pub-manifest/#profile-conformance"><code>conformsTo</code>
					term</a>&#160;[[!pub-manifest]] MUST be "<code>https://www.w3.org/TR/audiobooks/</code>".</p>

				<pre class="example" title="Setting a publication's conformance to Audiobook.">
						{
						    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
						    "conformsTo" : "https://www.w3.org/TR/audiobooks/"
						    &#8230;
						}
				</pre>

			</section>

			<section id="audio-type">
				<h3>Publication Type</h3>

				<p>The <dfn>Publication Type</dfn> is defined using the <code>type</code>
					term&#160;[[!pub-manifest]].</p>

				<pre class="example" title="Setting a publication's type to Audiobook.">
					{
					    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
					    "type"     : "Audiobook"
							&#8230;
					}
				</pre>

				<p>If a <code>type</code> is not specified, <a href="https://schema.org/Audiobook"
							><code>Audiobook</code></a>&#160;[[!schema.org]] is assumed as the default.</p>
			</section>

			<section id="audio-properties">
				<h3>Properties</h3>

				<section id="audio-creators">
					<h4>Creators</h4>

					<p>A <dfn>creator</dfn> is an individual or entity responsible for the creation of the Audiobook.
						The Audiobooks profile can use the full list of <a
							href="https://www.w3.org/TR/pub-manifest/#creators">creators</a> defined in
						[[!pub-manifest]].</p>

					<p>The creators list includes two recommended creators for Audiobooks:</p>

					<ul>
						<li>
							<a href="https://schema.org/author">author</a>
						</li>
						<li>
							<a href="https://schema.org/readBy">readBy</a>
						</li>
					</ul>

					<pre class="example" title="Author of a book">
		{
		    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
		    "@context" : ["https://schema.org","https://www.w3.org/ns/pub-context"],
		    "type" : "Audiobook",
		    &#8230;
		    "url" : "https://publisher.example.org/janeeyre",
		    "author" : {
		        "type" : "Person",
		        "name" : "Charlotte Bronte"
		    }
		}
					</pre>

					<pre class="example" title="Author and Narrator of an Audiobook">
		{
		    "conformsTo" : "https://www.w3.org/TR/audiobooks/";
		    "@context": ["https://schema.org", "https://www.w3.org/ns/pub-context"],
		    &#8230;
		    "url"	: "https://publisher.example.org/janeeyre",
		    "author" : {
		        "type": "Person",
		        "name": "Charlotte Bronte"
		    }
		    "readBy" : {
		        "type": "Person",
		        "name": "Ivan Herman",
		        "id"	: "https://www.w3.org/People/Ivan/"
		    }
		}
					</pre>
				</section>

				<section id="audio-duration">
					<h4>Duration</h4>

					<p>A <dfn>duration</dfn> is the length of the audio resources in an Audiobook. The duration property
						is fully defined in <a href="https://www.w3.org/TR/pub-manifest/#duration">Publication
							Manifest</a> [[!pub-manifest]].</p>

					<p>Duration SHOULD be expressed for the entirety of the audiobook as part of the manifest, and
						MUST be present at the item level in the <a href="#audio-readingorder">default reading
							order</a>.</p>

					<p>When a content creator specifies both the duration for the audiobook and item-level duration in
						the <a href="#audio-readingorder">default reading order</a> the resource-level duration SHOULD
						be equal to the sum of the durations of the items in the reading order.</p>

					<pre class="example" title="Duration of an Audiobook in Seconds">
									{
									    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
									    "@context" : ["https://schema.org","https://www.w3.org/ns/pub-context"],
									    &#8230;
									    "url" : "https://publisher.example.org/janeeyre",
									    "author" : {
									         "type"  : "Person",
									         "name"  : "Charlotte Bronte"
									    },
									    "duration" : "PT12345.235S"
									}
					</pre>

				</section>

			</section>

			<section id="audio-readingorder">
				<h3>Default Reading Order</h3>

				<p>The <a href="https://www.w3.org/TR/pub-manifest/#default-reading-order"><dfn>default reading
							order</dfn></a> [[!pub-manifest]] is a specific progression through the audio resources in
					the audiobook.</p>

				<p>The default reading order MUST contain at least one audio resource, which MAY be identified by the
						<code>type</code> of <a href="https://www.w3.org/TR/pub-manifest/#value-linked-resource"
							><code>LinkedResource</code></a> [[!pub-manifest]]. The default reading order MUST NOT
					contain non-audio resources.</p>

				<p>An audio resource MUST be referenced in its entirety via a URL [[url]].</p>

				<p class="note">It is important to note that a resource cannot be referenced more than once in the
					reading order. In the case where an audio file represents the content of multiple chapters or
					sections of the book, the <a href="#audio-toc">table of contents</a> should be used to specify the
					starting and ending points of those chapters in the larger audio file, as demonstrated in <a
						href="#toc-mediafragments">this example</a>.</p>

				<p class="note">Annotations can also use media fragments to identify the location of the annotation in
					the resource, and are compatible with the <a href="https://www.w3.org/TR/annotation-model/">Web
						Annotations</a> model. This method will only apply to audiobook manifests that are not
					packaged.</p>

				<pre class="example" title="Audiobook Reading Order for a Single Resource">
							{
							    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
							    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
							    "url" : "https://publisher.example.org/janeeyre",
							    "name" : "Jane Eyre",
							    "readingOrder" : [{
							        "type" : "LinkedResource",
							        "url" : "audio/janeeyre.mp3",
							        "encodingFormat" : "audio/mp3",
							        "name" : "Jane Eyre",
							        "duration" : "PT124503.123S"
							    }]
							}
					</pre>

				<pre class="example" title="Audiobook Reading Order for Multiple Resources using Media Fragments">
							{
							    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
							    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
							    "url" : "https://publisher.example.org/janeeyre",
							    "name" : "Jane Eyre",
							    "readingOrder" : [{
							        "type": "LinkedResource",
							        "url" : "audio/part001.wav#t=0,457.931",
							        "encodingFormat" : "audio/vnd-wav",
							        "name" : "Chapter 1",
							        "duration" : "PT457.931S"
							    }, {
							        "type" : "LinkedResource",
							        "url" : "audio/part002.wav#t=12.741",
							        "encodingFormat" : "audio/vnd-wav",
							        "name" : "Chapter 2",
							        "duration" : "PT234.245S"
							    }]
							}
						</pre>

			</section>

			<section id="audio-resourcelist">
				<h3>Resource List</h3>

				<p>The <dfn>resource list</dfn> enumerates any additional resources used in the processing and rendering
					of an audiobook that are not listed in the reading order. It is expressed using the
						<code>resources</code> property.</p>

				<p>If an audiobook includes supplemental content it MUST be referenced in the resource list.</p>

				<pre class="example" title="Audiobook with Supplemental Content">
						{
						    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
						    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
						    "url" : "https://publisher.example.org/janeeyre",
						    "name" : "Jane Eyre",
						    "resources" : [
						        "cover.jpg",
						        "portrait_CB.jpg",
						        "supplement.pdf"
						    ]
						}</pre>
			</section>

			<section id="audio-preview">
				<h3>Audiobook Previews</h3>

				<p>Previews are a common way to provide users an experience of the full content before purchasing or
					downloading the full audiobook.</p>

				<p>A <a href="https://www.w3.org/TR/pub-manifest/#preview">preview</a> is identified using the
						<code>preview</code> link relation, as defined in [[!pub-manifest]].</p>

				<p>Previews MAY be located externally or included as a resource of the audiobook.</p>

				<pre class="example" title="Audiobook with an External Preview">
							{
							    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
							    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
							    "url"	: "https://publisher.example.org/janeeyre",
							    "name" : "Jane Eyre",
							    "resources" : [{
							        "type" : "LinkedResource",
							        "url" : "https://publisher.example.org/jane-eyre-preview.wav",
							        "encodingFormat" : "audio/wav",
							        "rel" : "preview"
							    }]
							}</pre>

				<pre class="example" title="Audiobook with an Internal Preview">
							{
							    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
							    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
							    "url"	: "https://publisher.example.org/janeeyre",
							    "name" : "Jane Eyre",
							    "resources" : [{
							        "type" : "LinkedResource",
							        "url"	: "preview.wav",
							        "encodingFormat" : "audio/wav",
							        "rel"	: "preview"
							    }]
							}</pre>
			</section>

			<section id="audio-packaging" class="informative">
				<h3>Packaging</h3>

				<p>Audiobooks will be packaged using the method described in the <a href="https://www.w3.org/TR/lpf/"
						>Lightweight Packaging Format</a> [[lpf]] note.</p>

			</section>

			<section id="audio-accessibility" class="informative">
				<h3>Accessibility</h3>

				<p>The history of the audiobook is rooted in the world of accessibility. Both purely audio publications
					and publications that synchronize text and audio playback have long been used to assist users with
					alternative reading needs and preferences.</p>

				<p>An approach for accessible synchronized media in publications is currently being done by the <a
						href="https://www.w3.org/community/sync-media-pub/">Synchronized Multimedia for Publications
						Community Group</a>. Refer to the work of that group for more information about creating such
					content and incorporating it into an Audiobook.</p>

				<p>Alternatively, a content creator can provide the text equivalent as HTML [[html]] resources in the <a
						href="#audio-resourcelist">resources</a>.</p>

				<pre class="example" title="Audiobook with Alternate Text">
				{
				    "@context" : ["https://schema.org", "https://www.w3.org/ns/pub-context"],
				    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
				    "url" : "https://publisher.example.org/janeeyre",
				    "name" : "Jane Eyre",
				    "readingOrder" : {
				        "type" : "LinkedResource",
				        "url" : "audio/part001.wav#t=0",
				        "encodingFormat" : "audio/vnd-wav",
				        "name" : "Chapter 1",
				        "duration" : "PT457.931S",
				        "alternate" : {
				            "type" : "LinkedResource",
				            "url" : "text/part001-1.html",
				            "encodingFormat" : "text/html"},
				    },
				    "resources" : [{
			          "type": "LinkedResource",
			          "url": "text/part001-1.html",
			          "encodingFormat" : "text/html"
			      }&#8230;
				    ]
				}
			</pre>
			</section>

		</section>
		<section id="audio-manifest-processing">
			<h2>Manifest Processing</h2>

			<p>
				<em>This section depends on the Infra Standard [[!infra]].</em>
			</p>

			<p>The specification extends the Publication Manifest <a
					href="https://www.w3.org/TR/pub-manifest/#manifest-processing">processing
				algorithms</a>&#160;[[!pub-manifest]] as follows:</p>

			<dl>
				<dt>Generating the Internal Representation</dt>
				<dd>
					<p>The following <a href="https://www.w3.org/TR/pub-manifest/#processing-extension">extension
							steps</a> are added for Audiobook manifests:</p>
					<ol id="processing-toc">
						<li id="processing-duration">
							<p>(<a href="#audio-duration"></a>) Check the duration of the publication as follows:</p>
							<ol>
								<li id="processing-duration-var">
									<p>Let <var>resourceDuration</var> hold the total duration of individual
										resources.</p>
								</li>
								<li id="processing-duration-iterate">
									<p><a href="https://infra.spec.whatwg.org/#list-iterate">For each</a>
										<var>resource</var> of <var>data["readingOrder"]</var>:</p>
									<ol>
										<li id="processing-duration-res-none">
											<p>if <var>resource["duration"]</var> is not defined, <a
													href="https://www.w3.org/TR/pub-manifest/#dfn-validation-errors"
													>validation error</a>.</p>
										</li>
										<li id="processing-duration-add">
											<p>otherwise, if <var>resource["duration"]</var>, add
													<var>resource["duration"]</var> to <var>resourceDuration</var>.</p>
										</li>
									</ol>
								</li>
								<li id="processing-duration-total">
									<p>If the values cannot be compared because <var>data["duration"]</var> is not set,
											<a href="https://www.w3.org/TR/pub-manifest/#dfn-validation-errors"
											>validation error</a>.</p>
									<p>Otherwise, if <var>resourceDuration</var> does not specify the same total
										duration as <var>data["duration"]</var>, <a
											href="https://www.w3.org/TR/pub-manifest/#dfn-validation-errors">validation
											error</a>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>This step checks both that all resources in the reading order specify a duration and
									that the sum of all those durations matches the total duration for the
									publication.</p>
								<p>A validation error is only emitted while checking each resource if the resource does
									not specify a duration. The <a
										href="https://www.w3.org/TR/pub-manifest/#validate-duration">validity of the
										durations</a>&#160;[[pub-manifest]] is already checked in the publication
									manifest algorithm so does not need to be repeated.</p>
							</details>
						</li>
					</ol>
				</dd>

				<dt>Data Validation</dt>

				<dd>
					<p>The following <a href="https://www.w3.org/TR/pub-manifest/#validate-extension">extension
							steps</a> are added for Audiobook manifests:</p>
					<ol>
						<li id="validate-readingorder">
							<p>(<a href="#audio-readingorder"></a>) Check the reading order as follows:</p>
							<ol>
								<li id="validate-ro-none">
									<p>If <var>data["readingOrder"]</var> is not set, <a
											href="https://www.w3.org/TR/pub-manifest/#dfn-fatal-errors">fatal
										error</a>.</p>
								</li>
								<li id="validate-ro-audio">
									<p><a href="https://infra.spec.whatwg.org/#list-iterate">For each</a>
										<var>resource</var> in <var>data["readingOrder"]</var>, if <var>resource</var>
										is not an audio resource, <a
											href="https://www.w3.org/TR/pub-manifest/#dfn-validation-errors">validation
											error</a>, <a href="https://infra.spec.whatwg.org/#list-remove">remove</a>
										<var>resource</var> from <var>data["readingOrder"]</var>.</p>
								</li>
								<li id="validate-ro-empty">
									<p>If <var>data["readingOrder"]</var> is an empty <a
											href="https://infra.spec.whatwg.org/#list">list</a>, <a
											href="https://www.w3.org/TR/pub-manifest/#dfn-fatal-errors">fatal
										error</a>.</p>
								</li>
							</ol>
							<details>
								<summary>Explanation</summary>
								<p>This step ensures that only audio resources are listed in the reading order and
									removes any that are not.</p>
								<p>If the reading order does not contain any entries after checking each resource, a
									fatal error is returned as the publication is not a valid audiobook.</p>
							</details>
						</li>
						<li id="validate-type">
							<p>(<a href="#audio-type"></a>) If <var>data["type"]</var> is not set or is an empty <a
									href="https://infra.spec.whatwg.org/#list">list</a>, <a
									href="https://www.w3.org/TR/pub-manifest/#dfn-validation-errors">validation
									error</a>, set to <code>«&#160;"Audiobook"&#160;»</code>.</p>
							<details>
								<summary>Explanation</summary>
								<p>This step sets the default type of the publication to <code>Audiobook</code> when a
										<var>type</var> property has not been specified.</p>
							</details>
						</li>
						<li id="validate-rec-properties">
							<p>(<a href="#audio-requirements"></a>) Check that each of the following properties is set.
								If not, issue a <a href="https://www.w3.org/TR/pub-manifest/#dfn-validation-errors"
									>validation error</a> for each one.</p>
							<ul>
								<li>
									<var>data["abridged"]</var>
								</li>
								<li>
									<var>data["accessMode"]</var>
								</li>
								<li>
									<var>data["accessModeSufficient"]</var>
								</li>
								<li>
									<var>data["accessibilityFeature"]</var>
								</li>
								<li>
									<var>data["accessibilityHazard"]</var>
								</li>
								<li>
									<var>data["accessibilitySummary"]</var>
								</li>
								<li>
									<var>data["author"]</var>
								</li>
								<li>
									<var>data["dateModified"]</var>
								</li>
								<li>
									<var>data["datePublished"]</var>
								</li>
								<li>
									<var>data["id"]</var>
								</li>
								<li>
									<var>data["inLanguage"]</var>
								</li>
								<li>
									<var>data["name"]</var>
								</li>
								<li>
									<var>data["readBy"]</var>
								</li>
								<li>
									<var>data["readingProgression"]</var>
								</li>
								<li>
									<var>data["resources"]</var>
								</li>
								<li>
									<var>data["url"]</var>
								</li>
							</ul>
							<details>
								<summary>Explanation</summary>
								<p>This step checks that all the recommended properties have been set. For more
									information about these, refer to <a href="#audio-requirements"></a>.</p>
							</details>
						</li>
						<li id="validate-rec-relations">
							<p>(<a href="#audio-requirements"></a>) If no resource in <var>data["readingOrder"]</var> or
									<var>data["resources"]</var> has a <var>rel</var>
								<a href="https://infra.spec.whatwg.org/#map-entry">entry</a> that <a
									href="https://infra.spec.whatwg.org/#list-contain">contains</a> the relation
									<code>cover</code>, <a
									href="https://www.w3.org/TR/pub-manifest/#dfn-validation-errors">validation
									error</a>.</p>
							<details>
								<summary>Explanation</summary>
								<p>This step checks the reading order and resource list to verify that a cover has been
									specified (i.e., an resource has the value <code>cover</code> in its
										<code>rel</code> property).</p>
							</details>
						</li>
					</ol>
				</dd>
			</dl>
		</section>
		<section class="informative" id="toc-algorithm-extension">
			<h2>User Agent Processing of Machine-Processable Table of Contents</h2>

			<p>This specification extends the Publication Manifest’s <a data-cite="pub-manifest#app-toc-ua">User Agent
					Processing Algorithm</a> for Machine-Processable Table of Contents [[pub-manifest]] to locate a
				table of content element as follows:</p>

			<ol>
				<li> If the <a>primary entry page</a> is available, then execute the algorithm locating the table of
					content element on the primary entry page. </li>
				<li> If the previous step is not successful, locate the relevant resource, if available, in the manifest
					as described in <a data-cite="pub-manifest#contents">§&#160;4.8.1.3&#160;Table of Contents</a> in
					[[pub-manifest]], and execute the same algorithm on that resource. </li>
			</ol>

			<p>See also <a href="#audio-toc"></a> for further details.</p>

		</section>
		<section id="security-privacy">
			<h2>Security and Privacy Considerations</h2>

			<p>As Audiobooks is a profile of Publication Manifest [[pub-manifest]], all <a
					href="https://www.w3.org/TR/pub-manifest/#security-privacy">security and privacy</a> considerations
				detailed in that specification are applicable to this profile.</p>

			<p>This profile acknowledges the following considerations:</p>

			<ul>
				<li>References within the <a href="#audio-readingorder">Reading Order</a> and <a
						href="#audio-resourcelist">Resource List</a> can be references to both remote and local
					resources.</li>
			</ul>

		</section>
		<section id="audio-ua-behaviour" class="informative">
			<h2>User Agent Behaviors for Audiobooks</h2>

			<p>This section outlines the expected user agent behaviors for implementation of audiobooks. For processing
				instructions, user agents should refer to the <a
					href="https://www.w3.org/TR/pub-manifest/#manifest-processing"><code>Processing a
					Manifest</code></a> section of the Publication Manifest [[pub-manifest]] specification, and conform
				to any behavior described there.</p>

			<p>All user agent behaviors described in this section are intended to provide implementors with guidance,
				not strict requirements. Behaviors in this document are taken mainly from the <a
					href="https://www.w3.org/TR/pwp-ucr/">Use Cases and Requirements</a> [[pwp-ucr]] note published by
				the working group.</p>

			<section id="audio-ua-navigation">
				<h3>Opening and Navigating the Contents of an Audiobook</h3>

				<p>When a user agent opens an Audiobook, and the manifest processes according to the rules laid out in
						<a href="https://www.w3.org/TR/pub-manifest/#manifest-processing">Publication Manifest</a>
					[[pub-manifest]], it should be opened by the User Agent. The <a href="#audio-readingorder">Reading
						Order</a> or, if available, <a href="#audio-toc">Table of Contents</a> should be accessible to
					the user. A User Agent should be able to provide a list of the contents of the audiobook available
					to the user when requested. If a non-audio resource is present in the Reading Order, the User Agent
					can choose to present it to the user or skip it.</p>

				<p>User agents should provide a means of rendering non-audio resources within the Reading Order and
					Resource list. If the content cannot be rendered by the user agent, it is recommended that the user
					agent inform the user that the content is present but cannot be rendered.</p>

				<p>The <a href="#audio-pep">Primary Entry Page</a> is intended to be, when available, the entry point to
					the audiobook. If a content creator has provided a primary entry page, and the User Agent is capable
					of rendering or processing HTML content, it should be the first thing presented to the user. The
					Primary Entry Page may or may not contain a Table of Contents, if included using the
						<code>role="doc-toc"</code> it should be treated as the Table of Contents. If the Table of
					Contents is a separate document, it can be rendered however the User Agent chooses as long as it
					meets the requirements laid out above. If no Table of Contents is included in the Primary Entry Page
					or elsewhere, the User Agent should refer to the Reading Order.</p>

			</section>

			<section id="audio-ua-playback">
				<h3>Audiobook Playability</h3>

				<p>As outlined in the <a href="https://www.w3.org/TR/pwp-ucr/">Use Cases and Requirements</a>
					[[pwp-ucr]] note, an audiobook must be navigable in the User Agent. This means that a User Agent
					must provide methods for the user to move through the audiobook in a linear or non-linear fashion by
					either moving through the <a href="#audio-readingorder">Reading Order</a> seamlessly or by accessing
					the <a href="#audio-toc">Table of Contents</a>. The User Agent should also allow the user to move
					through individual audio files in short time increments.</p>

				<p>For an audiobook, the User Agent should provide a <a href="https://www.w3.org/TR/pwp-ucr/#player"
						>player interface</a> [[pwp-ucr]] that will allow the user to navigate, play, or pause the
					audiobook. This interface can be represented to the user in any way (i.e. physical buttons, visual
					interface, keyboard input, or voice commands), but should be accessible at any point in the
					listening experience.</p>

			</section>

			<section id="audio-ua-packaging">
				<h3>Audiobook Packaging and Offlining</h3>

				<p>The <a href="https://www.w3.org/TR/pwp-ucr/">Use Cases and Requirements</a> [[pwp-ucr]] note
					recommends that content be available offline and that any packaged formats should not affect the
					iterations of the publications. This means that even if the content is copied many times to many
					users via multiple User Agents, the core manifest and its identifier are never changed.</p>

				<p>This specification recommends the <a href="https://www.w3.org/TR/lpf/">Lightweight Packaging
						Format</a> [[lpf]] for packaging audiobook content, but this is not a requirement. Audiobook
					User Agents should be able to ingest LPF files for play, and should display content according to the
					requirements and recommendations in this document.</p>

				<p>If a User Agent is serving the content directly from their service (i.e. as a retailer or repository
					of content), it is recommended that they provide a method for offlining or downloading the content
					to the user. This can be in any format they choose, but the audiobook should be complete and valid
					and the contents listed in the manifest should be served in their entirety. Even if a User Agent
					does not support the display of a certain resource (i.e. an image file or data table), it should
					still be available to the user for download.</p>

				<p>This specification does not provide a method for content creators to protect or watermark their
					content, as there are existing methods available in the market today. User Agents who work with
					content creators that wish to protect or limit the distribution of their content can choose a method
					that works best for their requirements.</p>

			</section>

			<section id="audio-ua-accessibility">
				<h3>Audiobooks Accessibility</h3>

				<p>This specification recommends and provides a method for content creators to create fully <a
						href="#audio-accessibility">accessible audiobooks</a>. User Agents should use this information,
					in the section on Accessibility, to implement accessible audiobook interfaces. It is recommended
					that User Agents provide accessible player interfaces, as well as a method for content creators who
					have provided <code>alternate</code> content to have that content displayed.</p>

			</section>

		</section>
		<section id="change-log">
			<h2>Change Log</h2>

			<p>Substantive changes since <a href="https://www.w3.org/TR/audiobooks">Recommendation</a> publication.</p>

			<ul>
				<li>16-Feb-2022: To address <a href="https://www.github.com/w3c/audiobooks/issues/110">issue 110</a>, media fragments can no longer be used in the <code>url</code> property in the Reading Order.</li>
				<li>19-Jan-2022: Duration for items in the reading order is now a MUST, see <a href="https://www.github.com/w3c/audiobooks/issues/108">issue 108</a>.</li>
				<li>19-Jan-2022: Corrected a syntax error in the <a href="#audio-simple">simple audiobook</a> sample file, see <a href="https://www.github.com/w3c/audiobooks/issues/109">issue 109</a>.</li>
			</ul>

			<p>Substantive changes since the <a href="https://www.w3.org/TR/2019/WD-audiobooks-20190620/">First Public
					Working Draft</a>:</p>

			<ul>
				<li>14-Sept-2020: Added a note that informative information about the table of contents structure and
					formatting information is available in the Publication Manifest specification. See <a
						href="https://github.com/w3c/audiobooks/issues/97">issue 97</a>.</li>
				<li>12-Sept-2020: Removed the manifest processing step that warns if a table of contents is not found as
					the requirement is dependent on the presence of supplementary resources which cannot be reliably
					tested. See <a href="https://github.com/w3c/audiobooks/issues/93">issue 93</a>.</li>
				<li>8-Sept-2020: Clarified that the primary entry page is only required when the packaging does not
					provide an alternative method. See <a href="https://github.com/w3c/audiobooks/issues/61">issue
						61</a>.</li>
				<li>26-Aug-2020: Removed the example of synchronized narration and updated reference to the work of the
					Synchronized Multimedia for Publications Community Group to reflect the early nature of that work.
					See <a href="https://github.com/w3c/audiobooks/issues/87">issue 87</a>.</li>
				<li>27-July-2020: Updated the reference schema URL to a W3C address. See <a
						href="https://github.com/w3c/pub-manifest/issues/226">issue 226 in Publication
					Manifest</a>.</li>
				<li>2-July-2020: Added a note about the shape of the manifest being defined by the JSON schema to the
					manifest introduction. See <a href="https://github.com/w3c/audiobooks/issues/71">issue 71</a>.</li>
				<li>12-Feb-2020: The algorithm step to check and compare resource durations to the total audiobook
					duration was moved to avoid duplicate validity checks. The algorithm step to warn about the primary
					entry page not being listed in the unique resources has been removed as it is no checked in the
					publication manifest algorithm. See <a href="https://github.com/w3c/audiobooks/issues/71">issue
						71</a>.</li>
				<li>12-Feb-2020: The use of fragments in the reading order was clarified to also include end position. A
					number of examples were also fixed. See <a href="https://github.com/w3c/audiobooks/pull/69">pull
						request 69</a>.</li>
				<li>07-Feb-2020: The manifest requirements section was moved out of the properties section as it also
					includes resource relations. See <a href="https://github.com/w3c/audiobooks/issues/70">issue
					70</a>.</li>
				<li>03-Jan-2020: A new (informative) section <a href="#toc-algorithm-extension"></a> has been added
					defining, the extension of the table of contents processing algorithm. See <a
						href="https://github.com/w3c/audiobooks/issues/63">issue #63</a>. </li>
				<li>03-Jan-2020: Extra step in <a href="#audio-manifest-processing"></a> adding the PEP’s URL to the
					collection of unique resources in the manifest. See <a
						href="https://github.com/w3c/publ-tests/issues/7">issue #7 for the test-suite</a>. </li>
			</ul>

			<p>For a complete list of issues addressed, refer to the <a
					href="https://github.com/w3c/audiobooks/issues?q=is%3Aissue+is%3Aclosed+sort%3Aupdated-desc">GitHub
					tracker</a>.</p>
		</section>
		<section id="audio-manifest-examples" class="appendix informative">
			<h2>Manifest Examples</h2>

			<section id="audio-simple">
				<h3>Simple Audiobook</h3>
				<p>A manifest for an audiobook. The <a
						href="https://github.com/w3c/pub-manifest/blob/master/experiments/audiobook/flatland-canonical.json"
						>canonical version</a> of this manifest is also available.</p>
				<pre class="example" data-include="experiments/flatland.json" data-include-format="text"></pre>
			</section>

			<section id="audio-supplemental">
				<h3>Audiobook with Supplemental Content</h3>

				<p>A manifest for an audiobook with supplemental content.</p>

				<pre class="example">
					{
					    "@context" : ["https://schema.org", "https://www.w3/org/ns/pub-context"],
					    "conformsTo" : "https://www.w3.org/TR/audiobooks/",
					    "id" : "https://publisher.example.com/janeeyre",
					    "url" : "https://publisher.example.com/janeeyre",
					    "name" : "Jane Eyre",
					    "author" : "Charlotte Bronte",
					    "readBy" : "Jane Doe",
					    "duration" : "PT123456.789S",
					    "abridged" : false,
					    "inLanguage" : "en",
					    "dateModified" : "2019-03-29T15:59:00Z",
					    "datePublished" : "2019-03-29",

					    "readingOrder": [
					        {"url": "audio/chapter001.aac", "encodingFormat": "audio/aac", "name": "Chapter 1", "duration": "PT1234.567S"},
					        {"url": "audio/chapter002.aac", "encodingFormat": "audio/aac", "name": "Chapter 2", "duration": "PT890.123S"},
					        {"url": "audio/chapter003.aac", "encodingFormat": "audio/aac", "name": "Chapter 3", "duration": "PT456.789S"},
					        {"url": "audio/chapter004.aac", "encodingFormat": "audio/aac", "name": "Chapter 4", "duration": "PT987.654S"},
					        {"url": "audio/chapter005.aac", "encodingFormat": "audio/aac", "name": "Chapter 5", "duration": "PT321.987S"}
					    ],

				      "resources": [
					        {"rel": "cover", "url": "images/cover.jpg", "encordingFormat": "image/jpeg"},
					        {"rel": "contents", "url": "toc.html", "encodingFormat": "text/html"},
					        {"url": "haworth_house.pdf", "encodingFormat": "application/pdf"}
					    ]
					}
				</pre>
			</section>
		</section>
		<section id="audio-toc-examples" class="appendix informative">
			<h2>Table of Contents Examples</h2>

			<section id="toc-pep">
				<h3>Primary Entry Page with a Table of Contents</h3>

				<p>A primary entry page with a simple table of contents for an audiobook.</p>
				<pre class="example">
				    &lt;head&gt;
				        &#8230;
				        &lt;script type="application/ld+json"&gt;
				    {
				        "@context" : ["https://schema.org","https://www.w3.org/ns/pub-context"],
				        "conformsTo" : "https://www.w3.org/TR/audiobooks/",
				        &#8230;
				        "url" : "https://publisher.example.org/janeeyre",
				        &#8230;
				    }
				    &lt;/script&gt;
				    &#8230;
				&lt;/head&gt;
				&lt;body&gt;
				    &#8230;
				    &lt;nav role="doc-toc"&gt;
				        &lt;ol>
				            &lt;li>&lt;a href="audio/chapter001.wav">Chapter 1. There was no possibility of taking a walk that day...&lt;/a>&lt;/li>
				            &lt;li>&lt;a href="audio/chapter002.wav">Chapter 2. I resisted all the way:...&lt;/a>&lt;/li>
				            &lt;li>&lt;a href="audio/chapter003.wav">Chapter 3. The next thing I remember is,...&lt;/a>&lt;/li>
				            &#8230;
			          &lt;/ol>
				    &lt;/nav&gt;
				    &#8230;
				&lt;/body&gt;
					</pre>
			</section>

			<section id="toc-simple">
				<h3>Simple Table of Contents</h3>

				<p>A table of contents for a simple audiobook.</p>
				<pre class="example">
				&lt;nav role="doc-toc">
				    &lt;h2>JANE EYRE&lt;/h2>

				    &lt;ol>
				        &lt;li>&lt;a href="audio/chapter001.mp3">Chapter 1. There was no possibility of taking a walk that day...&lt;/a>&lt;/li>
				        &lt;li>&lt;a href="audio/chapter002.mp3">Chapter 2. I resisted all the way:...&lt;/a>&lt;/li>
				        &lt;li>&lt;a href="audio/chapter003.mp3">Chapter 3. The next thing I remember is,...&lt;/a>&lt;/li>
				        &#8230;
				    &lt;/ol>
				&lt;/nav>
				</pre>
			</section>

			<section id="toc-mediafragments">
				<h3>Table of Contents with Media Fragments</h3>

				<p>A table of contents using media fragment references to locations in a single audio track.</p>

				<pre class="example">
				&lt;nav role="doc-toc">
				    &lt;h2>JANE EYRE&lt;/h2>

				    &lt;ol>
				        &lt;li>&lt;a href="https://example.publisher.org/janeeyre/part001.mp3#t=0,456.788">Chapter 1&lt;/a>&lt;/li>
				        &lt;li>&lt;a href="https://example.publisher.org/janeeyre/part001.mp3#t=456.789,1234.566">Chapter 2&lt;/a>&lt;/li>
				        &lt;li>&lt;a href="https://example.publisher.org/janeeyre/part001.mp3#t=1234.567">Chapter 3&lt;/a>&lt;/li>
				    &lt;/ol>
				&lt;/nav>
				</pre>
			</section>
		</section>
		<div data-include="common/html/acknowledgements.html" data-include-replace="true"></div>
	</body>
</html>
